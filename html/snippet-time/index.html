<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  
  

  <title>
    time(时间) | 碎碎念ZWS
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="keywords" content=",time(时间)" />
  <meta name="description" content="做一个爱写笔记的攻城狮，记录生活，记录你" />
  <meta name="version" content="2022-12-28 08:55:15" />
  <link rel="icon" href="/img/favicon.ico" />
  
<link rel="stylesheet" href="/css/main.css">

  
  
<link rel="stylesheet" href="/css/highlight.css">

  
  
  
  
<link rel="stylesheet" href="/css/gray.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

</html>
<body class="is-animated" >
  <div style="display:none">
    <svg style="position: absolute; width: 0; height: 0;" width="0" height="0" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <defs>
        <symbol id="icon-heart" viewBox="0 0 1024 1024">
          <title>heart</title>
          <path class="path1" d="M755.188 64c-107.63 0-200.258 87.554-243.164 179-42.938-91.444-135.578-179-243.216-179-148.382 0-268.808 120.44-268.808 268.832 0 301.846 304.5 380.994 512.022 679.418 196.154-296.576 511.978-387.206 511.978-679.418 0-148.392-120.43-268.832-268.812-268.832z"></path>
        </symbol>
        <symbol id="icon-twitter" viewBox="0 0 1024 1024">
          <title>twitter</title>
          <path class="path1" d="M1024 226.4c-37.6 16.8-78.2 28-120.6 33 43.4-26 76.6-67.2 92.4-116.2-40.6 24-85.6 41.6-133.4 51-38.4-40.8-93-66.2-153.4-66.2-116 0-210 94-210 210 0 16.4 1.8 32.4 5.4 47.8-174.6-8.8-329.4-92.4-433-219.6-18 31-28.4 67.2-28.4 105.6 0 72.8 37 137.2 93.4 174.8-34.4-1-66.8-10.6-95.2-26.2 0 0.8 0 1.8 0 2.6 0 101.8 72.4 186.8 168.6 206-17.6 4.8-36.2 7.4-55.4 7.4-13.6 0-26.6-1.4-39.6-3.8 26.8 83.4 104.4 144.2 196.2 146-72 56.4-162.4 90-261 90-17 0-33.6-1-50.2-3 93.2 59.8 203.6 94.4 322.2 94.4 386.4 0 597.8-320.2 597.8-597.8 0-9.2-0.2-18.2-0.6-27.2 41-29.4 76.6-66.4 104.8-108.6z"></path>
        </symbol>
        <symbol id="icon-sina-weibo" viewBox="0 0 1024 1024">
          <title>sina-weibo</title>
          <path class="path1" d="M430.2 898c-169.6 16.8-316-60-327-171.2-11-111.4 117.6-215 287-231.8 169.6-16.8 316 60 326.8 171.2 11.2 111.4-117.4 215.2-286.8 231.8zM769.2 528.6c-14.4-4.4-24.4-7.2-16.8-26.2 16.4-41.2 18-76.6 0.2-102-33.2-47.4-124.2-45-228.4-1.2 0 0-32.8 14.2-24.4-11.6 16-51.6 13.6-94.6-11.4-119.6-56.6-56.6-207 2.2-336 131.2-96.4 96.2-152.4 198.8-152.4 287.4 0 169.2 217.2 272.2 429.6 272.2 278.4 0 463.8-161.8 463.8-290.2 0-77.8-65.4-121.8-124.2-140z"></path>
          <path class="path2" d="M954.2 218.6c-67.2-74.6-166.4-103-258-83.6v0c-21.2 4.6-34.6 25.4-30 46.4 4.6 21.2 25.2 34.6 46.4 30 65.2-13.8 135.6 6.4 183.4 59.4s60.8 125.2 40.2 188.4v0c-6.6 20.6 4.6 42.6 25.2 49.4 20.6 6.6 42.6-4.6 49.4-25.2v-0.2c28.8-88.4 10.6-190-56.6-264.6z"></path>
          <path class="path3" d="M850.8 312c-32.8-36.4-81.2-50.2-125.6-40.6-18.2 3.8-29.8 22-26 40.2 4 18.2 22 29.8 40 25.8v0c21.8-4.6 45.4 2.2 61.4 19.8 16 17.8 20.4 42 13.4 63.2v0c-5.6 17.6 4 36.8 21.8 42.6 17.8 5.6 36.8-4 42.6-21.8 14-43.4 5.2-93-27.6-129.2z"></path>
          <path class="path4" d="M439.6 696.6c-6 10.2-19 15-29.2 10.8-10.2-4-13.2-15.6-7.4-25.4 6-9.8 18.6-14.6 28.6-10.8 10 3.6 13.6 15 8 25.4zM385.4 765.8c-16.4 26.2-51.6 37.6-78 25.6-26-11.8-33.8-42.2-17.4-67.8 16.2-25.4 50.2-36.8 76.4-25.8 26.6 11.4 35.2 41.6 19 68zM447 580.6c-80.6-21-171.8 19.2-206.8 90.2-35.8 72.4-1.2 153 80.2 179.4 84.4 27.2 184-14.6 218.6-92.6 34.2-76.6-8.4-155.2-92-177z"></path>
        </symbol>
        <symbol id="icon-rss" viewBox="0 0 1024 1024">
          <title>rss</title>
          <path class="path1" d="M136.294 750.93c-75.196 0-136.292 61.334-136.292 136.076 0 75.154 61.1 135.802 136.292 135.802 75.466 0 136.494-60.648 136.494-135.802-0.002-74.742-61.024-136.076-136.494-136.076zM0.156 347.93v196.258c127.784 0 247.958 49.972 338.458 140.512 90.384 90.318 140.282 211.036 140.282 339.3h197.122c-0.002-372.82-303.282-676.070-675.862-676.070zM0.388 0v196.356c455.782 0 826.756 371.334 826.756 827.644h196.856c0-564.47-459.254-1024-1023.612-1024z"></path>
        </symbol>
        <symbol id="icon-github" viewBox="0 0 1024 1024">
          <title>github</title>
          <path class="path1" d="M512.008 12.642c-282.738 0-512.008 229.218-512.008 511.998 0 226.214 146.704 418.132 350.136 485.836 25.586 4.738 34.992-11.11 34.992-24.632 0-12.204-0.48-52.542-0.696-95.324-142.448 30.976-172.504-60.41-172.504-60.41-23.282-59.176-56.848-74.916-56.848-74.916-46.452-31.778 3.51-31.124 3.51-31.124 51.4 3.61 78.476 52.766 78.476 52.766 45.672 78.27 119.776 55.64 149.004 42.558 4.588-33.086 17.852-55.68 32.506-68.464-113.73-12.942-233.276-56.85-233.276-253.032 0-55.898 20.004-101.574 52.76-137.428-5.316-12.9-22.854-64.972 4.952-135.5 0 0 43.006-13.752 140.84 52.49 40.836-11.348 84.636-17.036 128.154-17.234 43.502 0.198 87.336 5.886 128.256 17.234 97.734-66.244 140.656-52.49 140.656-52.49 27.872 70.528 10.35 122.6 5.036 135.5 32.82 35.856 52.694 81.532 52.694 137.428 0 196.654-119.778 239.95-233.79 252.624 18.364 15.89 34.724 47.046 34.724 94.812 0 68.508-0.596 123.644-0.596 140.508 0 13.628 9.222 29.594 35.172 24.566 203.322-67.776 349.842-259.626 349.842-485.768 0-282.78-229.234-511.998-511.992-511.998z"></path>
        </symbol>

        <symbol id="icon-deploy" viewBox="0 0 1024 1024">
          <title>deploy</title>
          <path class="path1" d="M902 32L992 92.192l-90.912 855.264L812 992l-212.336-136.256L294.176 992l-82.176-60 30-298.176L32 475.008v-117.344L902 32z m-153.056 197.456L177.072 431.168l184.928 140.928-30 273.44 272.336-123.168 181.632 119.952 67.616-544.208L577.92 636.304l-101.232-82.88L748.944 229.44z" fill="#0078FF" p-id="2531"></path>
        </symbol>

      </defs>
    </svg>
  </div>
  <div class="surface-content">
    <header class="site-header">
  <hgroup>
    <h1 class="site-title">
      <a href="http://zhuweisheng.com.cn" class="logo" title="从前端菜鸟到前端码农">碎碎念ZWS</a>
    </h1>
    <p class="site-description">做一个爱写笔记的攻城狮，记录生活，记录你</p>
  </hgroup>
  <div class="site-nav">
    <ul class="topNav-items">
      
        <li class="menu-item"><a class="main-nav-link" href="/">首页</a></li>
      
        <li class="menu-item"><a class="main-nav-link" href="/categories">分类</a></li>
      
        <li class="menu-item"><a class="main-nav-link" href="/friends">链接</a></li>
      
        <li class="menu-item"><a class="main-nav-link" href="/we">我们</a></li>
      
        <li class="menu-item"><a class="main-nav-link" href="/archives">归档</a></li>
      
        <li class="menu-item"><a class="main-nav-link" href="/tags">标签</a></li>
      
        <li class="menu-item"><a class="main-nav-link" href="/about">关于</a></li>
      
    </ul>
  </div>
  <div class="site-icons">
    
      <a href="/sitemap.xml" target="_blank" class="rss-link"><svg class="icon icon-rss"><use xlink:href="#icon-rss"></use></svg></a>
    
      <a href="https://github.com/nooldey" target="_blank" class="rss-link"><svg class="icon icon-github"><use xlink:href="#icon-github"></use></svg></a>
    
      <a href="/love" target="_blank" class="rss-link"><svg class="icon icon-heart"><use xlink:href="#icon-heart"></use></svg></a>
    
  </div>
</header>
    <div class="container">
      <section class="main-content"><article id="post-html/snippet-time" class="post-item">
  
  <header class="post-header">
    
  
    <h2 class="post-title">
      time(时间)
    </h2>
  

    <div class="post-meta">
      <time class="article-date" datetime="2017-06-01T03:38:57.000Z" itemprop="datePublished">2017-06-01</time>

    </div>
  </header>
  

  <div class="grap">
    <p>使用vuejs进行开发的过程中，积累的与time相关的东西。</p>
<span id="more"></span>

<h3 id="时间推算"><a href="#时间推算" class="headerlink" title="时间推算"></a>时间推算</h3><pre class="line-numbers language-javascript" data-language="javascript"><div class="caption"><span>对时间进行推算</span><a href="/gist/js/timer/timeBefore.js">view raw</a></div><code class="language-javascript"><span class="token comment">/*
 * @Author: zws &lt;nooldey@gmail.com> 
 * @Date:   2018-01-10 09:06:09
 * @Last Modified by: zws
 * @Last Modified time: 2021-04-29 17:02:56
 * @Description: 获取历史日期的各种格式和计算
 */</span>

<span class="token comment">/*1. 获取去年的今天*/</span>

<span class="token keyword">function</span> <span class="token function">zws_last</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/*获取去年今日*/</span>
    <span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> nt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">29</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        nt<span class="token punctuation">.</span><span class="token function">setMonth</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
        nt<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    nt<span class="token punctuation">.</span><span class="token function">setFullYear</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token function">formatDate</span><span class="token punctuation">(</span>nt<span class="token punctuation">,</span> <span class="token string">'y-M-d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/*2. 获取前N天的日期*/</span>

<span class="token keyword">function</span> <span class="token function">zws_before</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/*获取几天前*/</span>
    <span class="token keyword">return</span> zeroTime <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">3600</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/*3. 将时间戳转为文字-N久前*/</span>

<span class="token keyword">function</span> <span class="token function">zws_along</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 计算距离当前日期为：X天前</span>
    <span class="token comment">//设置基准参数</span>
    <span class="token keyword">let</span> minute <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> hour <span class="token operator">=</span> minute <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> day <span class="token operator">=</span> hour <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> month <span class="token operator">=</span> day <span class="token operator">*</span> <span class="token number">30</span><span class="token punctuation">;</span>
    <span class="token comment">//获取当前时间，计算区间</span>
    <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> dif <span class="token operator">=</span> n <span class="token operator">-</span> t<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dif <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> m <span class="token operator">=</span> dif <span class="token operator">/</span> month<span class="token punctuation">;</span>
    <span class="token keyword">let</span> w <span class="token operator">=</span> dif <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">7</span> <span class="token operator">*</span> day<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> d <span class="token operator">=</span> dif <span class="token operator">/</span> day<span class="token punctuation">;</span>
    <span class="token keyword">let</span> h <span class="token operator">=</span> dif <span class="token operator">/</span> hour<span class="token punctuation">;</span>
    <span class="token keyword">let</span> min <span class="token operator">=</span> dif <span class="token operator">/</span> minute<span class="token punctuation">;</span>
    <span class="token keyword">let</span> txt <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token comment">// FROM: ZHUWEISHENG.COM.CN</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>m <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        txt <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'月前'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>w <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        txt <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'周前'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>d <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        txt <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'天前'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>h <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        txt <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'小时前'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>min <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        txt <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>min<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'分钟前'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        txt <span class="token operator">=</span> <span class="token string">'刚刚'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> txt<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="时间格式化与时区切换"><a href="#时间格式化与时区切换" class="headerlink" title="时间格式化与时区切换"></a>时间格式化与时区切换</h3><pre class="line-numbers language-javascript" data-language="javascript"><div class="caption"><span>对日期的处理</span><a href="/gist/js/timer/timeFormat.js">view raw</a></div><code class="language-javascript"><span class="token comment">/*
 * @Author: nooldey
 * @Date:   2018-01-06 16:57:15
 * @Last Modified by: zws
 * @Last Modified time: 2021-05-07 15:26:11
 * @Description: 针对时间的各种格式化
 */</span>

<span class="token comment">/* 时间格式化 */</span>
<span class="token keyword">const</span> formatDate <span class="token operator">=</span> <span class="token punctuation">(</span>stamp<span class="token punctuation">,</span> format <span class="token operator">=</span> <span class="token string">'y-M-d'</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">/* 日期格式化，不转时区 */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>stamp<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>stamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token function-variable function">fillzero</span> <span class="token operator">=</span> <span class="token parameter">t</span> <span class="token operator">=></span> t <span class="token operator">></span> <span class="token number">9</span> <span class="token operator">?</span> t <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token string">'0'</span> <span class="token operator">+</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> year <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            month <span class="token operator">=</span> <span class="token function">fillzero</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            date <span class="token operator">=</span> <span class="token function">fillzero</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            hour <span class="token operator">=</span> <span class="token function">fillzero</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            min <span class="token operator">=</span> <span class="token function">fillzero</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            sec <span class="token operator">=</span> <span class="token function">fillzero</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> pre <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span>
            aft <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment">// 输出时间的两个部分，pre:日期部分,aft:时间部分</span>
        <span class="token keyword">let</span> ymd <span class="token operator">=</span> format<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^y(.+?)M(.+?)d</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 年月日 ymd</span>
        <span class="token keyword">let</span> hm <span class="token operator">=</span> format<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">h\:m$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 时分  hm</span>
        <span class="token keyword">let</span> hms <span class="token operator">=</span> format<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">h\:m\:s$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 时分秒  hms</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ymd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> line <span class="token operator">=</span> ymd<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">;</span>
            pre <span class="token operator">=</span> <span class="token punctuation">[</span>year<span class="token punctuation">,</span> month<span class="token punctuation">,</span> date<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>hm<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            aft <span class="token operator">=</span> <span class="token punctuation">[</span>hour<span class="token punctuation">,</span> min<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>hms<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            aft <span class="token operator">=</span> <span class="token punctuation">[</span>hour<span class="token punctuation">,</span> min<span class="token punctuation">,</span> sec<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">let</span> output <span class="token operator">=</span> <span class="token punctuation">[</span>pre<span class="token punctuation">,</span> aft<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> output<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'time error'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span>
        <span class="token keyword">return</span> stamp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token comment">/* 时间国际化处理 */</span>
<span class="token keyword">const</span> zeroToLocal <span class="token operator">=</span> <span class="token punctuation">(</span>stamp<span class="token punctuation">,</span> format <span class="token operator">=</span> <span class="token string">'y-M-d'</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">/* 将传入的零时区的时间转化为当地时间显示，默认输出年月日 */</span>
    <span class="token comment">/*
     * 参数：
     * offset: 当前时区时间差 = 零时区时间-当地时间 单位：min
     *       eg: 中国时区+0800 时间差为-480(min),-480/60 = -8小时
     * localtime: 转换后输出的当地时间
     */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>stamp<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token comment">/* 零时区转当地时间 */</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>stamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>d <span class="token operator">||</span> d <span class="token operator">==</span> <span class="token string">'Invalid Date'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> stamp<span class="token punctuation">;</span>
        <span class="token keyword">let</span> offset <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTimezoneOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> localtime <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> offset <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> output <span class="token operator">=</span> <span class="token function">formatDate</span><span class="token punctuation">(</span>localtime<span class="token punctuation">,</span> format<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> output<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'time error'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span>
        <span class="token keyword">return</span> stamp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">const</span> localToZero <span class="token operator">=</span> <span class="token punctuation">(</span>stamp<span class="token punctuation">,</span> format <span class="token operator">=</span> <span class="token string">'y-M-d'</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">/* 将当地时间转化为零时区时间 */</span>
    <span class="token comment">/*
     * 参数：
     * offset: 当前时区时间差 = 零时区时间-当地时间 单位：min
     *       eg: 中国时区+0800 时间差为-480(min),-480/60 = -8小时
     * zeroTime: 转换后输出的当地时间
     */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>stamp<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>stamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>d <span class="token operator">||</span> d <span class="token operator">==</span> <span class="token string">'Invalid Date'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> stamp<span class="token punctuation">;</span>
    d <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>date<span class="token punctuation">,</span> time<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'T'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>year<span class="token punctuation">,</span> month<span class="token punctuation">,</span> day<span class="token punctuation">]</span> <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>hour<span class="token punctuation">,</span> min<span class="token punctuation">,</span> sec<span class="token punctuation">]</span> <span class="token operator">=</span> time<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> output <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> pre <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span>
        aft <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment">// 输出时间的两个部分，pre:日期部分,aft:时间部分</span>
    <span class="token keyword">let</span> ymd <span class="token operator">=</span> format<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^y(.+?)M(.+?)d</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 年月日 ymd</span>
    <span class="token keyword">let</span> hm <span class="token operator">=</span> format<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">h\:m$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 时分  hm</span>
    <span class="token keyword">let</span> hms <span class="token operator">=</span> format<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">h\:m\:s$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 时分秒  hms</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ymd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> line <span class="token operator">=</span> ymd<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">;</span>
        pre <span class="token operator">=</span> <span class="token punctuation">[</span>year<span class="token punctuation">,</span> month<span class="token punctuation">,</span> day<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hm<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        aft <span class="token operator">=</span> <span class="token punctuation">[</span>hour<span class="token punctuation">,</span> min<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hms<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        aft <span class="token operator">=</span> <span class="token punctuation">[</span>hour<span class="token punctuation">,</span> min<span class="token punctuation">,</span> sec<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    output <span class="token operator">=</span> <span class="token punctuation">[</span>pre<span class="token punctuation">,</span> aft<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> output<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

  </div>

  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/time-format/" rel="tag">time-format</a></li></ul>
  

  
</article>


<div class="author-info u-clearfix">
	
	<img class="avatar" src="/img/avatar.png" alt="NOOLDEY">
	
	<div class="author-content">
		<div class="author-description">
			<p>本文作者：NOOLDEY</p>
			<p>做一个诗情画意的码农，皮皮猪，我们走！</p>
			<p>原文链接：
				<a href="http://zhuweisheng.com.cn/html/snippet-time/">http://zhuweisheng.com.cn/html/snippet-time/</a>
			</p>
			<b>本站文章如无特殊声明均为原创，创作不易，转载请注明来源，谢谢！</b>
		</div>
	</div>
</div>


<!-- 目录 -->


<!-- 评论留言 -->


<div id="comments">
  
  <div id="issues"></div>
  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <script>
    var gitalk = new Gitalk({
      clientID: '2175e96bf1778b0e1969',
      clientSecret: 'b696be3126f6a6364c6fb6adffd398c075e14b07',
      repo: 'nooldey.github.io',
      owner: 'nooldey',
      admin: ['nooldey'],
      id: '/html/snippet-time/', // Ensure uniqueness and length less than 50
      distractionFreeMode: false // Facebook-like distraction free mode
    })
    gitalk.render('issues')
  </script>
  
  <!-- 禁用提示 -->
  <noscript> 哎呀，评论功能被禁用了，快启用JavaScript恢复吧！ </noscript>
</div>

</section>
    </div>
    
	<footer class="site-footer">
		<div class="footer-info">
			<p>
				<a href="http://zhuweisheng.com.cn" class="logo">
					碎碎念ZWS
				</a>
				<span>&copy;2013 - 2022</span>
			</p>
			<p>
				<svg class="icon icon-heart">
					<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-heart"></use>
				</svg>
				<a href="https://fatesinger.com" target="_blank" title="Hexo 主题 kana">Theme:Kana</a>.
			</p>
			<p>
				<svg class="icon icon-deploy">
					<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-deploy"></use>
				</svg>
				&nbsp;
				2022-12-28 20:55:15
			</p>
		</div>
		
		<div>
			友情链接：
			
				<a href="/go?id=vultr" target="_blank" class="ftsp">
					Vultr限时送$50美金!
				</a>
				
		</div>
		<section class="love-time">
	<p>猪头和丫头牵手走过了：</p>
	<p class="love-time-count"></p>
	<p class="love-time-asume"></p>
</section>

<script src="/js/timer.js"></script>

	</footer>
	
<script src="/js/app.js"></script>

  </div>
  </body>

  </html>